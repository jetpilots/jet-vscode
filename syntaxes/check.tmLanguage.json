{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "jet-lang",
	"patterns": [
		{
			"include": "#funcDecl"
		},
		{
			"include": "#issuetags"
		},
		{
			"include": "#atstrings"
		},
		{
			"include": "#strings"
		},
		{
			"include": "#regex"
		},
		{
			"include": "#units"
		},
		{
			"include": "#keywords"
		},
		{
			"include": "#operators"
		},
		{
			"include": "#numbers"
		},
		{
			"include": "#funcCall"
		},
		{
			"include": "#variables"
		},
		{
			"include": "#comments"
		},
		{
			"include": "#booleans"
		},
		{
			"include": "#types"
		},
		{
			"include": "#brackets"
		},
		{
			"include": "#templateParams"
		},
		{
			"include": "#argLabelsOnNewLine"
		},
		{
			"include": "#lastResortIdents"
		}
	],
	"repository": {
		"funcDecl": {
			"captures": {
				"1": {
					"name": "keyword.control.check"
				},
				"2": {
					"name": "entity.name.function.check"
				},
				"3": {
					"name": "meta.function-call.check"
				}
			},
			"match": "\\b(decl func|func|redef) ([a-z][.a-zA-Z0-9]*)?"
		},
		"constructor": {
			"captures": {
				"1": {
					"name": "keyword.operator.new"
				}
			},
			"match": "\\b([A-Z_][_a-z.A-Z0-9]*)\\("
		},
		"funcCall": {
			"captures": {
				"1": {
					"name": "meta.function-call.check"
				},
				"2": {
					"name": "meta.function-call.check"
				},
				"3": {
					"name": "meta.function-call.check"
				}
			},
			"match": "\\b([a-z_][a-z._A-Z0-9]*)(?=!?\\()"
		},
		"variables": {
			"captures": {
				"1": {
					"name": "keyword.other.check"
				},
				"2": {
					"name": "xxxvariable.name.check"
				}
			},
			"match": "^\\s*(var) ([_a-zA-Z][a-zA-Z0-9]*)"
		},
		"argLabelsOnNewLineXXX": {
			"captures": {
				"1": {
					"name": "meta.function-call.check"
				},
				"2": {
					"name": "xxxxvariable.name.check"
				}
			},
			"match": "^\\s*([a-z][a-zA-Z0-9]*) ([a-z][a-zA-Z0-9]*)(: | = )"
		},
		"keywords": {
			"patterns": [
				{
					"name": "keyword.control.check",
					"match": "^\\s*(while|else|match|case|deprecated|import|test|event|catch|hold|for)\\b|\\b(do|continue|extends|break|as|pass|yield|return|then|if|check|with|throw|raise|where|result|or (continue|pass|return|break|throw))\\b"
				},
				{
					"name": "keyword.control.check",
					"match": "^\\s*end\\b"
				},
				{
					"name": "keyword.control.check",
					"nameh": "constant.numeric.check",
					"match": "\\bend\\b"
				},
				{
					"name": "constant.numeric.check",
					"match": "#[a-zA-Z0-9]*",
					"comment": "Inferred enum members"
				}
			]
		},
		"templateParams": {
			"patterns": [
				{
					"name": "xxxvariable.name.check",
					"match": "\\b(ch|os[.](path|info)|os|mac|net|http|ssh|ftp|pop|imap|dom|win|gtk|ui|str|io)[.]\\b"
				}
			]
		},
		"strings": {
			"name": "string.quoted.double.check",
			"begin": "(\"|')",
			"end": "(?<!\\\\)\\1",
			"patterns": [
				{
					"name": "keyword.operator.logical.check",
					"match": "\\{[^{}]+\\}|\\['\"]|\\\\0\\d\\d|\\\\\\w"
				},
				{
					"name": "keyword.operator.logical.check",
					"match": "\\$[a-z.0-9A-Z]+|\\$\\([a-z.0-9,A-Z-]*\\)(\\([.0-9-]+\\))?"
				}
			]
		},
		"atstrings": {
			"name": "comment.line.check",
			"begin": "^\\s*---\\s*$",
			"end": "^\\s*---\\s*$",
			"patterns": [
				{
					"name": "constant.character.escape.check",
					"match": "^\\s*todo:"
				}
			]
		},
		"atstrihungs": {
			"name": "string.quoted.double.check",
			"begin": "(?<=@ *)(\"|')",
			"end": "(?<!\\\\)\\1",
			"patterns": [
				{
					"name": "constant.character.escape.check",
					"match": "\\{[a-z.0-9,A-Z*_/~-]*\\}|\\['\"]|\\\\0\\d\\d|\\\\\\w"
				}
			]
		},
		"regex": {
			"name": "constant.numeric.check",
			"begin": "`",
			"end": "`",
			"patterns": [
				{
					"name": "constant.character.escape.check",
					"match": "\\\\."
				},
				{
					"name": "comment.line.check",
					"match": "~.*$"
				}
			]
		},
		"units": {
			"captures": {
				"1": {
					"name": "string.units.check"
				}
			},
			"match": "(\\|[a-zA-Z1][a-zA-Z0-9./{}]*)"
		},
		"issuetagjs": {
			"patterns": [
				{
					"name": "string.issuetag.check",
					"match": "#[a-zA-Z0-9]+"
				}
			]
		},
		"comments": {
			"patterns": [
				{
					"name": "comment.line.check",
					"match": "~.*$"
				},
				{
					"captures": {
						"1": {
							"name": "variable.name.check"
						}
					},
					"match": "(\\||~ \\||[\\d.]+% \\|)"
				}
			]
		},
		"types": {
			"patterns": [
				{
					"captures": {
						"1": {
							"name": "keyword.control.check"
						},
						"2": {
							"name": "keyword.control.check"
						},
						"3": {
							"name": "support.type.check"
						}
					},
					"match": "^\\s*((decl )?type|extend|enum) +([A-Za-z_][a-z._A-Z0-9]*)"
				},
				{
					"captures": {
						"1": {
							"name": "support.type.check"
						},
						"2": {
							"name": "support.type.check"
						}
					},
					"match": "\\b([a-z][A-Za-z0-9.]*\\.)?([A-Z][a-zA-Z0-9]*)\\b"
				},
				{
					"captures": {
						"1": {
							"name": "keyword.control.check"
						}
					},
					"match": "^(value )"
				},
				{
					"captures": {
						"1": {
							"name": "support.type.check"
						}
					},
					"match": "\\b::([A-Z][a-zA-Z0-9]*)\\b"
				},
				{
					"captures": {
						"1": {
							"name": "support.type.check"
						}
					},
					"match": "(?<=\\[ *)([A-Z][a-z.A-Z, 0-9]*)(?= *\\])"
				}
			]
		},
		"operators": {
			"patterns": [
				{
					"name": "keyword.operator.logical.check",
					"match": "([<>!%=/+\\-.:*/]=|[<!_$,%&>:?=+\\-\\\\*./^]|\\b(and|or|not in|not|in|contains|intersects)\\b)"
				},
				{
					"name": "variable.name.check",
					"match": "(?<=&|!\\()[A-Za-z_][a-z.A-Z_0-9]*\\b"
				},
				{
					"name": "variable.name.check",
					"match": "[A-Za-z_][a-z.A-Z_0-9]*(?=\\!\\.)"
				},
				{
					"name": "variable.name.check",
					"match": "(?<=\\()[a-z_A-Z][a-z._A-Z0-9]*(?=![^=])"
				},
				{
					"name": "variable.name.check",
					"match": "^\\s*[a-z_][a-z.A-Z_0-9]*(?=(\\[.*\\])? *([+-/*^%]=|= ))"
				},
				{
					"name": "variable.name.check",
					"match": "(?<= (then|do) ) *[a-z_][a-z._A-Z0-9]*(?=(\\[.*\\])? *([+-/*^%]=|= ))"
				},
				{
					"match": "(?<=\\[ *)([0-9]+D)\\b",
					"name": "keyword.operator.array.check"
				}
			]
		},
		"numbers": {
			"patterns": [
				{
					"name": "constant.numeric.check",
					"match": "\\b-?[0-9']+(\\.[0-9']+)?([dDEe]-?[0-9']+)?[ikMGTPEYmun]?\\b|\\b-?[0-9]+x[0-9]+\\b|0x[a-fA-F0-9]+"
				},
				{
					"name": "constant.numeric.check",
					"match": "@[a-zA-Z0-9]+\\([a-zA-Z0-9, ]+\\)"
				}
			]
		},
		"brackets": {
			"patterns": [
				{
					"name": "meta.function-call.check",
					"match": "[(){}\\[\\]]"
				}
			]
		},
		"booleans": {
			"patterns": [
				{
					"name": "constant.language.check",
					"match": "\\b(yes|no|nil|nan|inf|tiny|huge)\\b"
				}
			]
		},
		"lastResortIdents": {
			"patterns": [
				{
					"captures": {
						"1": {
							"name": "keyword.operator.logical.check"
						}
					},
					"match": "(?<=[(,{]) ?([a-z][a-zA-Z0-9]*) ?(?==)"
				},
				{
					"name": "xxxvariable.name.check",
					"match": "\\b[a-z][A-Za-z0-9]*\\.\\b"
				}
			]
		}
	},
	"scopeName": "source.check"
}